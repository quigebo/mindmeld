<div class="audio-recorder-container mb-4" data-controller="audio-recorder" data-audio-recorder-max-duration-value="300" data-audio-recorder-transcription-output-field-value="body">
  <!-- Recording Button with Circular Progress -->
  <div class="flex justify-center mb-4">
    <div class="relative">
      <!-- Circular Progress Ring -->
      <svg class="w-24 h-24 transform -rotate-90" data-audio-recorder-target="progress">
        <!-- Background circle -->
        <circle
          cx="48"
          cy="48"
          r="34"
          stroke="currentColor"
          stroke-width="3"
          fill="transparent"
          class="text-gray-200"
        />
        <!-- Progress circle -->
        <circle
          cx="48"
          cy="48"
          r="34"
          stroke="currentColor"
          stroke-width="3"
          fill="transparent"
          stroke-linecap="round"
          stroke-dasharray="213.628"
          stroke-dashoffset="213.628"
          class="text-indigo-500 transition-all duration-100 ease-out"
        />
      </svg>
      
      <!-- Record/Stop Button -->
      <button 
        data-audio-recorder-target="button"
        data-action="click->audio-recorder#toggle"
        class="absolute inset-0 flex items-center justify-center w-24 h-24 rounded-full bg-white shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-500/20"
      >
        <!-- Default microphone icon -->
        <svg class="w-8 h-8 text-indigo-500" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
          <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Timer Display -->
  <div class="text-center mb-3">
    <div class="text-lg font-mono font-semibold text-gray-700" data-audio-recorder-target="timer">
      5:00
    </div>
    <p class="text-xs text-gray-500">Tap to start recording your memory</p>
  </div>

  <!-- Transcription Status -->
  <div class="mb-2">
    <div class="text-sm text-gray-600 opacity-0 transition-opacity duration-300" data-audio-recorder-target="transcription_status">
      <span class="inline-flex items-center">
        <svg class="w-4 h-4 mr-1 text-green-500" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </svg>
        Transcribing...
      </span>
    </div>
  </div>

  <!-- Recording Status -->
  <div class="text-center mb-3">
    <div class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800 opacity-0 transition-opacity duration-300" data-audio-recorder-target="status">
      <svg class="w-4 h-4 mr-2 animate-pulse" fill="currentColor" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="3"/>
      </svg>
      Recording...
    </div>
  </div>
</div>

<style>
  .audio-recorder-container {
    /* Ensure proper sizing and positioning */
  }
  
  /* Interim transcription styling */
  .interim {
    color: #6b7280;
    font-style: italic;
  }
  
  /* Recording state animations */
  .recording {
    animation: pulse 2s infinite;
  }
  
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }
  
  /* Progress ring animation */
  circle[stroke-dashoffset] {
    transition: stroke-dashoffset 0.1s ease-out;
  }
</style>
